webpackJsonp([2],{KE2j:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),n=a.n(s),i={name:"v-spec-param",props:{group:{type:Object}},data:function(){return{headers:[{text:"id",value:"id",align:"center",sortable:!1},{text:"参数名",value:"name",align:"center",sortable:!1},{text:"是否为数值",value:"numeric",align:"center",sortable:!1},{text:"单位",value:"unit",align:"center",sortable:!1},{text:"是否通用",value:"generic",align:"center",sortable:!1},{text:"是否可搜索",value:"searching",align:"center",sortable:!1},{text:"操作",align:"center",sortable:!1}],params:[],show:!1,param:{},isEdit:!1}},watch:{group:{deep:!0,handler:function(t){t&&t.id&&this.loadData()}}},methods:{loadData:function(){var t=this;this.$http.get("/item/spec/params?gid="+this.group.id).then(function(e){var a=e.data;a.forEach(function(t){t.segments=t.segments?t.segments.split(",").map(function(t){return t.split("-")}):[]}),t.params=a}).catch(function(){t.params=[]})},editParam:function(t){this.param=t,this.isEdit=!0,this.show=!0},addParam:function(){this.param={cid:this.group.cid,groupId:this.group.id,segments:[],numeric:!1,searching:!1,generic:!1},this.show=!0},deleteParam:function(t){var e=this;this.$message.confirm("确认要删除该参数吗？").then(function(){e.$http.delete("/item/spec/param/"+t).then(function(){e.$message.success("删除成功")}).catch(function(){e.$message.error("删除失败")})})},formatBoolean:function(t){return t?"是":"否"},save:function(){var t=this,e={};n()(e,this.param),e.segments=e.segments.map(function(t){return t.join("-")}).join(","),this.$http({method:this.isEdit?"put":"post",url:"/item/spec/param",data:e}).then(function(){t.show=!1,t.$message.success("保存成功！"),t.loadData()}).catch(function(){t.$message.error("保存失败！")})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-data-table",{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.params,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.id))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(t.formatBoolean(e.item.numeric)))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.unit||"无"))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(t.formatBoolean(e.item.generic)))]),t._v(" "),a("td",{staticClass:"text-xs-center"},[t._v(t._s(t.formatBoolean(e.item.searching)))]),t._v(" "),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{attrs:{icon:""},on:{click:function(a){t.editParam(e.item)}}},[a("i",{staticClass:"el-icon-edit"})]),t._v(" "),a("v-btn",{attrs:{icon:""},on:{click:function(a){t.deleteParam(e.item.id)}}},[a("i",{staticClass:"el-icon-delete"})])],1)]}}])},[a("template",{slot:"no-data"},[t._v("\n            该分组下没有参数\n            ")])],2),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:t.addParam}},[t._v("新增参数")]),t._v(" "),a("v-dialog",{attrs:{"max-width":"350px",scrollable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-text",{staticStyle:{height:"300px"}},[a("v-flex",{staticClass:"px-3"},[a("v-text-field",{attrs:{label:"参数名称："},model:{value:t.param.name,callback:function(e){t.$set(t.param,"name",e)},expression:"param.name"}}),t._v(" "),a("v-checkbox",{attrs:{label:"是否为通用属性",color:"primary","hide-details":""},model:{value:t.param.generic,callback:function(e){t.$set(t.param,"generic",e)},expression:"param.generic"}}),t._v(" "),a("v-checkbox",{attrs:{label:"是否为数值类型",color:"primary","hide-details":""},model:{value:t.param.numeric,callback:function(e){t.$set(t.param,"numeric",e)},expression:"param.numeric"}}),t._v(" "),t.param.numeric?a("v-text-field",{attrs:{label:"数值单位："},model:{value:t.param.unit,callback:function(e){t.$set(t.param,"unit",e)},expression:"param.unit"}}):t._e(),t._v(" "),a("v-checkbox",{attrs:{label:"是否用于搜索",color:"primary","hide-details":""},model:{value:t.param.searching,callback:function(e){t.$set(t.param,"searching",e)},expression:"param.searching"}}),t._v(" "),t.param.searching&&t.param.numeric?a("v-flex",{staticClass:"px-2"},[t._v("\n\n                    搜索过滤区间：\n                    "),t._l(t.param.segments,function(e,s){return a("v-layout",{key:s,attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{prefix:"From: ","single-line":"","hide-details":""},model:{value:e[0],callback:function(a){t.$set(e,0,a)},expression:"s[0]"}})],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{prefix:"To: ","single-line":"","hide-details":""},model:{value:e[1],callback:function(a){t.$set(e,1,a)},expression:"s[1]"}})],1),t._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){t.param.segments.splice(s,1)}}},[a("i",{staticClass:"el-icon-delete"})])],1)],1)}),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-spacer"),t._v(" "),a("v-flex",{attrs:{xs1:""}},[a("v-tooltip",{attrs:{left:""}},[a("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(e){t.param.segments.push([0,0])}},slot:"activator"},[a("v-icon",[t._v("add")])],1),t._v(" "),a("span",[t._v("点击为数值类型的参数添加分段，便于搜索过滤")])],1)],1)],1)],2):t._e()],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(i,r,!1,null,null,null);e.default=c.exports}});
//# sourceMappingURL=2.ba5e91bf1da2520374ea.js.map